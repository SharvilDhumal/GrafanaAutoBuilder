<app-navbar></app-navbar>
<div class="admin-container">

    <!-- Header -->
    <!-- <header class="admin-header">
      <h1>Grafana AutoBuilder – Admin Panel</h1>
      <button class="logout-btn">Logout</button>
    </header> -->
  
    <!-- Stats Section -->
    <section class="stats-grid">
      <div class="stat-card">
        <h3>CSV → Grafana Conversions</h3>
        <p class="stat-value">{{ (activities$ | async)?.length || 0 }}</p>
      </div>
      <div class="stat-card">
        <h3>Total Visits</h3>
        <p class="stat-value">{{ totalVisits$ | async }}</p>
      </div>
      <div class="stat-card">
        <h3>Active Users</h3>
        <p class="stat-value">{{ activeUsers$ | async }}</p>
      </div>
    </section>

    <!-- CSV Upload -->
    <!-- <section class="upload-section">
      <h2>Upload CSV</h2>
      <p>Upload a CSV file containing panel specifications to automatically update Grafana dashboards.</p>
      <input type="file" accept=".csv" class="file-input" />
      <button class="upload-btn">Upload & Build Dashboard</button>
    </section> -->

    <!-- Recent User Activity -->
    <section class="activity-section">
      <h2>Recent User Activity</h2>
      <ul class="activity-list">
        <ng-container *ngIf="(activities$ | async) as acts; else noActs">
          <li class="activity-item" *ngFor="let a of acts">
            <div class="activity-icon" aria-hidden="true">⚡</div>
            <div class="activity-content">
              <div class="activity-row">
                <a class="user-link" [href]="'mailto:' + a.user">{{ a.user }}</a>
                <span class="activity-action">converted</span>
                <span class="doc-pill">{{ a.docName }}</span>
              </div>
              <div class="activity-meta">{{ a.timestamp | date:'MMM d, y, h:mm a' }}</div>
            </div>
          </li>
        </ng-container>
        <ng-template #noActs>
          <li class="activity-empty"><small>No recent activity yet.</small></li>
        </ng-template>
      </ul>
    </section>

    <!-- Dashboard Table -->
    <!-- <section class="dashboard-table">
      <h2>Existing Dashboards</h2>
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Datasource</th>
            <th>Visualization</th>
            <th>Created At</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Server Metrics</td>
            <td>PostgreSQL-1</td>
            <td>Timeseries</td>
            <td>2025-08-16</td>
            <td>
              <button class="edit-btn">Edit</button>
              <button class="delete-btn">Delete</button>
            </td>
          </tr>
          <tr>
            <td>Sales KPIs</td>
            <td>PostgreSQL-2</td>
            <td>Bar Chart</td>
            <td>2025-08-10</td>
            <td>
              <button class="edit-btn">Edit</button>
              <button class="delete-btn">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </section> -->
  </div>