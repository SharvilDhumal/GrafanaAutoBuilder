<app-navbar></app-navbar>
<section class="doc-wrapper">
  <h1>Grafana AutoBuilder — User Guide</h1>

  <p class="lead">
    Turn a simple CSV into a production‑ready Grafana dashboard in minutes.
  </p>

  <h2 id="what-is">What is Grafana AutoBuilder?</h2>
  <p>
    Grafana AutoBuilder converts a lightweight CSV specification into a complete
    Grafana dashboard. Each row in the CSV describes a single panel (its title,
    query, visualization, units, thresholds, and size). Upload the CSV and
    AutoBuilder will create and arrange the panels automatically, returning a
    link to open the dashboard in Grafana.
  </p>

  <h2 id="get-started">Get started in 3 steps</h2>
  <ol>
    <li>Go to the <strong>Upload</strong> page in the app.</li>
    <li>Drag & drop your <code>.csv</code> file (or browse to select it).</li>
    <li>
      Click <em>Generate Dashboard</em> and then open the provided Grafana link.
    </li>
  </ol>

  <h2 id="csv-schema">CSV schema (one row = one panel)</h2>
  <p>
    Use the following headers exactly (case‑insensitive). Unused fields can be
    left blank.
  </p>
  <ul>
    <li><code>title</code> — Panel title.</li>
    <li>
      <code>datasource</code> — Grafana datasource <em>UID</em> (ask your admin
      if unsure).
    </li>
    <li>
      <code>query</code> — The query for the panel (e.g., Prometheus
      <code>expr</code>).
    </li>
    <li>
      <code>visualization</code> — One of: <code>timeseries</code> (default),
      <code>stat</code>, <code>barchart</code>, <code>gauge</code>.
    </li>
    <li>
      <code>unit</code> — Grafana unit (examples: <code>percent</code>,
      <code>bytes</code>, <code>s</code>).
    </li>
    <li>
      <code>thresholds</code> — Optional alert colors as
      <code>low|high</code> numeric values (e.g., <code>80|90</code>).
    </li>
    <li>
      <code>w</code> — Optional width in grid units (defaults to
      <code>12</code>, grid is 24‑columns).
    </li>
    <li>
      <code>h</code> — Optional height in grid units (defaults to
      <code>8</code>).
    </li>
  </ul>

  <p><strong>Notes</strong></p>
  <ul>
    <li>
      If <code>visualization</code> is blank or unknown, it becomes
      <code>timeseries</code>.
    </li>
    <li>
      <code>thresholds</code> adds green/yellow/red steps; use two numbers like
      <code>80|90</code>.
    </li>
    <li>
      Leave <code>w</code> / <code>h</code> blank to use sensible defaults;
      panels auto‑wrap across the 24‑column grid.
    </li>
  </ul>

  <h3 id="csv-example">Sample CSV</h3>
  <pre class="code">
title,datasource,query,visualization,unit,thresholds,w,h
CPU Usage (5m),your-prometheus-ds-uid,avg(rate(process_cpu_seconds_total[5m])) * 100,timeseries,percent,80|90,12,8
Error Rate,your-prometheus-ds-uid,sum(rate(http_requests_total&#123;code=~"5.."&#125;[5m])) / sum(rate(http_requests_total[5m])) * 100,stat,percent,1|5,6,6
Top Endpoints (5m),your-prometheus-ds-uid,topk(5, sum by (handler) (rate(http_requests_total[5m]))),barchart,,,
Memory Usage,your-prometheus-ds-uid,process_resident_memory_bytes,gauge,bytes,10737418240|16106127360,6,6</pre
  >

  <h2 id="mock-data">Generate mock data</h2>
  <p>
    You can quickly produce a CSV of panel definitions for demos, testing, or
    kick‑starting a dashboard.
  </p>
  <ol>
    <li>
      <strong>With AI (recommended):</strong> copy the prompt below into your
      favorite AI tool.
    </li>
    <li>
      <strong>Manual:</strong> duplicate the sample CSV above and change
      titles/queries/units as needed.
    </li>
  </ol>

  <h3 id="ai-prompt">AI prompt to generate a CSV for this project</h3>
  <pre class="code">
You are generating a CSV for Grafana AutoBuilder. Output ONLY valid CSV with this header:
title,datasource,query,visualization,unit,thresholds,w,h

Requirements:
- Use datasource UID: your-prometheus-ds-uid (as a placeholder if unknown)
- Provide 6–10 panels covering timeseries, stat, barchart, and gauge
- Prefer Prometheus-style queries (promql) with realistic examples
- Use units like percent, bytes, s when appropriate; leave unit blank if unknown
- Use thresholds in the form low|high (e.g., 80|90) when useful; otherwise leave blank
- Use widths/heights that fit a 24-column grid (e.g., w=12,h=8 for large charts; w=6,h=6 for small)

Return ONLY the CSV rows including the header. No commentary.</pre
  >

  <h2 id="tips">Tips & validation</h2>
  <ul>
    <li>Header names must match the schema. Extra columns are ignored.</li>
    <li>
      Leave cells empty rather than writing <code>n/a</code> to avoid parsing
      issues.
    </li>
    <li>
      If a panel doesn’t render, check the <code>datasource</code> UID and the
      <code>query</code> syntax.
    </li>
    <li>
      After upload, the app shows the dashboard title and a link to open it in
      Grafana.
    </li>
  </ul>
</section>
