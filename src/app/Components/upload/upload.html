<app-navbar></app-navbar>
<div class="upload-container">
    <div class="upload-header">
      <h1>Upload CSV. Get Grafana Dashboard.</h1>
      <p class="subtitle">Transform your raw data into beautiful, actionable dashboards instantly</p>
    </div>
  
    <div class="upload-card">
      <div class="upload-area" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
        <div class="upload-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
        </div>
        <h3>Drag & Drop your CSV file here</h3>
        <p class="file-types">Supports: .csv files only</p>
        <input type="file" id="fileInput" (change)="onFileSelected($event)" accept=".csv" #fileInput>
        <button class="browse-btn" (click)="fileInput.click()">Browse Files</button>
      </div>
  
      <div class="selected-file" *ngIf="selectedFile">
        <div class="file-info">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
          </svg>
          <span>{{ selectedFile.name }}</span>
          <span class="file-size">{{ getFileSize(selectedFile.size) }}</span>
        </div>
        <button class="remove-btn" (click)="removeFile()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
  
      <button class="generate-btn" [disabled]="!selectedFile || loading" [class.disabled]="!selectedFile || loading" (click)="generateDashboard()">
        {{ loading ? 'Generating...' : 'Generate Dashboard' }}
      </button>

      <div class="error" *ngIf="errorMsg" style="color:#c00; margin-top:12px;">
        {{ errorMsg }}
      </div>

      <div class="success" *ngIf="result" style="margin-top:12px;">
        <p>Dashboard created: <strong>{{ result.title }}</strong></p>
        <a [href]="result.grafanaUrl" target="_blank" rel="noopener">Open in Grafana</a>
      </div>
    </div>
  
    <div class="features-section">
      <h2>Powerful Features</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3>CSV to Dashboard Automation</h3>
          <p>Simply upload your CSV file and get a complete Grafana dashboard with relevant KPIs automatically generated.</p>
        </div>
        <div class="feature-card">
          <h3>Grafana API Integration</h3>
          <p>Seamless integration with Grafana's API for direct dashboard creation and updates.</p>
        </div>
      </div>
    </div>
  </div>
<app-footer></app-footer>