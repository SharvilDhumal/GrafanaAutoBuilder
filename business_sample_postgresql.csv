title,datasource,query,visualization,unit,thresholds,w,h
Revenue (Daily),,"SELECT DATE_TRUNC('day', order_time) AS time, SUM(amount_cents)/100.0 AS value FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1 ORDER BY time",timeseries,currencyUSD,10000|20000,12,8
Orders (Daily),,"SELECT DATE_TRUNC('day', order_time) AS time, COUNT(*)::numeric AS value FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1 ORDER BY time",timeseries,short,100|300,12,6
Average Order Value (AOV),,"SELECT DATE_TRUNC('day', order_time) AS time, AVG(amount_cents)/100.0 AS value FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1 ORDER BY time",stat,currencyUSD,50|100,6,6
Refund Rate %,,"SELECT DATE_TRUNC('day', order_time) AS time, (SUM(CASE WHEN status = 'refunded' THEN 1 ELSE 0 END) * 100.0 / NULLIF(COUNT(*),0))::numeric AS value FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1 ORDER BY time",gauge,percent,2|5,6,6
Orders by Status (Top),,"SELECT status AS label, COUNT(*)::numeric AS value FROM orders GROUP BY status ORDER BY value DESC LIMIT 5",barchart,short,,12,6
Top Customers by Revenue,,"SELECT COALESCE(customer_id::text, 'Unknown') AS label, SUM(amount_cents)/100.0 AS value FROM orders GROUP BY customer_id ORDER BY value DESC LIMIT 10",barchart,currencyUSD,,12,8
Conversion Rate %,,"WITH sessions AS (SELECT DATE_TRUNC('day', started_at) AS d, COUNT(*) AS s FROM web_sessions WHERE started_at >= $__timeFrom() AND started_at <= $__timeTo() GROUP BY 1), orders AS (SELECT DATE_TRUNC('day', order_time) AS d, COUNT(*) AS o FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1) SELECT COALESCE(s.d, o.d) AS time, (COALESCE(o.o,0) * 100.0 / NULLIF(COALESCE(s.s,0),0))::numeric AS value FROM sessions s FULL OUTER JOIN orders o ON s.d = o.d ORDER BY time",timeseries,percent,1|3,12,8
Repeat Purchase Rate %,,"WITH first_orders AS (SELECT customer_id, MIN(order_time) AS first_time FROM orders GROUP BY customer_id), repurch AS (SELECT DATE_TRUNC('day', o.order_time) AS d, COUNT(DISTINCT o.customer_id) AS c FROM orders o JOIN first_orders f ON o.customer_id = f.customer_id AND o.order_time > f.first_time WHERE o.order_time >= $__timeFrom() AND o.order_time <= $__timeTo() GROUP BY 1), custs AS (SELECT DATE_TRUNC('day', order_time) AS d, COUNT(DISTINCT customer_id) AS c FROM orders WHERE order_time >= $__timeFrom() AND order_time <= $__timeTo() GROUP BY 1) SELECT COALESCE(custs.d, repurch.d) AS time, (COALESCE(repurch.c,0) * 100.0 / NULLIF(COALESCE(custs.c,0),0))::numeric AS value FROM custs FULL OUTER JOIN repurch ON custs.d = repurch.d ORDER BY time",timeseries,percent,5|10,12,6
Orders by Hour (All-Time),,"SELECT DATE_PART('hour', order_time)::int AS label, COUNT(*)::numeric AS value FROM orders GROUP BY 1 ORDER BY 1",barchart,short,,12,6
